(function(e){function t(t){for(var r,n,i=t[0],c=t[1],l=t[2],p=0,d=[];p<i.length;p++)n=i[p],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var c=s[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var r={},o={app:0},a=[];function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=r,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/biblewriting/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var h=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},7018:function(e,t,s){},"95f3":function(e,t,s){"use strict";s("a8e5")},a8e5:function(e,t,s){},cb3c:function(e,t,s){"use strict";s("7018")},cd49:function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[e._m(0),t("section",{staticClass:"section",attrs:{id:"body"}},[t("b-loading",{attrs:{"is-full-page":!1},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}}),t("BibleSelector",{staticClass:"screen-only"}),t("div",{staticClass:"container",attrs:{id:"writebook"}},[t("div",{staticClass:"content"},[t("span",{staticClass:"print-only"},[e._v(" "+e._s(e.today)+" ")]),e._v(" "+e._s(e.$store.getters.bookName)+" "+e._s(e.$store.state.chapter)+":"+e._s(e.verseNumber)+" "),t("span",{staticClass:"screen-only"},[e._v(" "+e._s(e.$store.getters.verse)+" ")])]),t("b-field",{staticClass:"screen-only"},[t("b-button",{attrs:{type:"is-primary",icon:"printer",expanded:""},on:{click:e.print}},[e._v(" Print ")])],1),t("WriteBook",{attrs:{type:"grey"}}),t("WriteBook",{attrs:{type:"transparent"}}),e._m(1)],1)],1)])},a=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("section",{staticClass:"hero is-primary screen-only"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container"},[t("h1",{staticClass:"title"},[e._v(" 성경쓰기연습장 생성기 ")]),t("h2",{staticClass:"subtitle"},[e._v(" Data from "),t("a",{attrs:{href:"https://bskorea.or.kr/",target:"_blank"}},[e._v("대한성서공회")])]),t("img",{attrs:{src:s("cf05")}})])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"copyright screen-only"},[e._v(" Icons made by "),t("a",{attrs:{href:"https://www.flaticon.com/authors/itim2101",title:"itim2101"}},[e._v("itim2101")]),e._v(" from "),t("a",{attrs:{href:"https://www.flaticon.com/",title:"Flaticon"}},[e._v(" www.flaticon.com")])])}],n=s("9ab4"),i=s("60a3"),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"container"},[t("section",[t("b-field",[t("b-select",{attrs:{rounded:"",expanded:"",icon:"translate"},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}},e._l(e.versions,(function(s){return t("option",{key:s.code,domProps:{value:s.code}},[e._v(" "+e._s(s.name)+" ")])})),0)],1),t("b-field",[t("b-autocomplete",{attrs:{rounded:"",data:e.bookNames,icon:"book-open-page-variant",clearable:"","open-on-focus":""},model:{value:e.book,callback:function(t){e.book=t},expression:"book"}},[t("template",{slot:"empty"},[e._v("No results found")])],2)],1),t("b-field",{attrs:{label:"장"}},[t("b-slider",{attrs:{min:1,max:e.chapters,ticks:"","custom-formatter":e=>e?e.toString():""},model:{value:e.chapter,callback:function(t){e.chapter=t},expression:"chapter"}})],1),t("b-field",{attrs:{label:"절"}},[t("b-slider",{attrs:{min:1,max:e.verses,ticks:"","custom-formatter":e=>e?e.toString():""},model:{value:e.verse,callback:function(t){e.verse=t},expression:"verse"}})],1),t("b-field",[t("b-checkbox",{model:{value:e.ranged,callback:function(t){e.ranged=t},expression:"ranged"}},[e._v(" 여러 절 보기 ")])],1)],1)])},l=[],h=s("7240");let p=class extends i["c"]{constructor(){super(...arguments),this.book="",this.ranged=!1}created(){this.onBookName()}get version(){return this.$store.state.version}set version(e){(async()=>{try{await this.$store.dispatch("select",{version:e})}catch(t){this.$buefy.toast.open({duration:5e3,message:t.toString(),position:"is-bottom",type:"is-danger"})}})()}onBookName(){this.book=this.$store.getters.bookName}async onBook(){const e=this.$store.getters.books.find(({name:e})=>e===this.book);if(e&&this.$store.state.book!==e.code)try{await this.$store.dispatch("select",{book:e.code})}catch(t){this.$buefy.toast.open({duration:5e3,message:t.toString(),position:"is-bottom",type:"is-danger"})}}get chapter(){return this.$store.state.chapter||1}set chapter(e){this.setchapter(e)}async setchapter(e){if(this.chapter!==e)try{await this.$store.dispatch("selectRange",{chapter:e})}catch(t){this.$buefy.toast.open({duration:5e3,message:t.toString(),position:"is-bottom",type:"is-danger"})}}get singleVerse(){return this.$store.state.verseStart||1}set singleVerse(e){this.setverse(e,e)}get multiVerse(){const e=this.$store.state.verseStart||1,t=this.$store.state.verseEnd||1;return[e,t]}set multiVerse(e){2===e.length&&this.setverse(e[0],e[1])}get verse(){return this.ranged?this.multiVerse:this.singleVerse}set verse(e){this.ranged?this.multiVerse=e:this.singleVerse=e}async setverse(e,t){if(this.multiVerse[0]!==e||this.multiVerse[1]!==t)try{await this.$store.dispatch("selectRange",{verseStart:e,verseEnd:t})}catch(s){this.$buefy.toast.open({duration:5e3,message:s.toString(),position:"is-bottom",type:"is-danger"})}}get versions(){return this.$store.getters.versions}get bookNames(){return this.$store.getters.books.map(({name:e})=>e).filter(e=>e.toLowerCase().includes(this.book.toLowerCase()))}get chapters(){return this.$store.getters.chapters}get verses(){return this.$store.getters.verses}};Object(n["a"])([Object(i["d"])("$store.getters.bookName")],p.prototype,"onBookName",null),Object(n["a"])([Object(i["d"])("book")],p.prototype,"onBook",null),Object(n["a"])([Object(h["debounce"])(500)],p.prototype,"setchapter",null),Object(n["a"])([Object(h["debounce"])(200)],p.prototype,"setverse",null),p=Object(n["a"])([i["a"]],p);var d=p,v=d,u=s("2877"),b=Object(u["a"])(v,c,l,!1,null,null,null),f=b.exports,g=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"page container"},e._l(e.page,(function(s,r){return t("div",{key:r,staticClass:"row"},e._l(s,(function(s,r){return t("WriteCell",{key:r,attrs:{cell:s,type:e.type}})})),1)})),0)},y=[],m=(s("14d9"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("svg",{staticClass:"cell",class:{grey:"grey"===e.type,transparent:"transparent"===e.type},attrs:{viewBox:"0 0 10 10"}},[t("text",{attrs:{x:e.leftHalf?"25%":e.rightHalf?"75%":"50%",y:"50%","text-anchor":"middle","dominant-baseline":"central"}},[e._v(" "+e._s(e.cellGlyph)+" ")]),e.overlayGlyph?t("text",{attrs:{x:"100%",y:"50%","text-anchor":"end","dominant-baseline":"central"}},[e._v(" "+e._s(e.overlayGlyph)+" ")]):e._e(),t("line",{staticStyle:{stroke:"rgb(192,192,192)","stroke-width":"1px"},attrs:{x1:"0",y1:"5",x2:"10",y2:"5","vector-effect":"non-scaling-stroke"}}),t("line",{staticStyle:{stroke:"rgb(192,192,192)","stroke-width":"1px"},attrs:{x1:"5",y1:"0",x2:"5",y2:"10","vector-effect":"non-scaling-stroke"}})])}),k=[];let w=class extends i["c"]{get overlayGlyph(){return this.cell.length>=2&&(this.cell.charCodeAt(0)<32||this.cell.charCodeAt(0)>=256)?this.cell[1]:""}get cellGlyph(){return this.overlayGlyph?this.cell[0]:this.cell}get leftHalf(){return!![".",","].includes(this.cell.trim())||!!['" ',"' "].includes(this.cell)}get rightHalf(){return!![' "'," '"].includes(this.cell)||!!['"',"'"].includes(this.cell)}};Object(n["a"])([Object(i["b"])(String)],w.prototype,"cell",void 0),Object(n["a"])([Object(i["b"])({default:""})],w.prototype,"type",void 0),w=Object(n["a"])([i["a"]],w);var $=w,_=$,S=(s("95f3"),Object(u["a"])(_,m,k,!1,null,"0f533038",null)),x=S.exports;const j=(e,t,s)=>e>=t&&e<s;let O=class extends i["c"]{constructor(){super(...arguments),this.glyphPerRow=10}adjustGlyphsPerRow(){let e=10,t=this.verse.length,s=0;this.glyphPerRow=10;while(e<t){if(this.glyphPerRow=Math.floor((e+t)/2),s=this.page.length-.7*this.glyphPerRow,e===this.glyphPerRow)break;if(s>0)e=this.glyphPerRow;else{if(!(s<0))break;t=this.glyphPerRow}}s>0&&(this.glyphPerRow+=1),this.glyphPerRow<10&&(this.glyphPerRow=10)}get verse(){return this.$store.getters.verse}get page(){const e=[];let t=0,s=!0;while(t<this.verse.length){const r=[];while(" "===this.verse[t]&&t<this.verse.length)++t;if(t>=this.verse.length)break;let o=0,a=0;s&&(a+=1,r.push("")),s=!1;while(a<this.glyphPerRow&&t+o<this.verse.length){if("\n"==this.verse[t+o]){o+=1,s=!0;break}j(this.verse.charCodeAt(t+o),32,256)&&j(this.verse.charCodeAt(t+o+1),32,256)?(r.push(this.verse[t+o]+this.verse[t+o+1]),o+=2):(r.push(this.verse[t+o]),o+=1),++a}if(r.length===this.glyphPerRow&&[".",",",'"',"'"].includes(this.verse[t+o])&&(r[r.length-1]+=this.verse[t+o],o+=1),r.length>0){while(r.length<this.glyphPerRow)r.push("");e.push(r)}t+=o}return e}};Object(n["a"])([Object(i["b"])({default:""})],O.prototype,"type",void 0),Object(n["a"])([Object(i["d"])("verse")],O.prototype,"adjustGlyphsPerRow",null),O=Object(n["a"])([Object(i["a"])({components:{WriteCell:x}})],O);var C=O,P=C,E=(s("cb3c"),Object(u["a"])(P,g,y,!1,null,"f966e77c",null)),N=E.exports;let R=class extends i["c"]{constructor(){super(...arguments),this.today=""}selectViaHash(){const e=(e,t)=>isNaN(e)?t:e,t=new URL(location.href).hash,[s,r,o,a,n]=t.substr(1).split("/"),i=e(parseInt(o),1),c=e(parseInt(a),1),l=e(parseInt(n),c);return this.$store.dispatch("selectRange",{version:s,book:r,chapter:i,verseStart:c,verseEnd:l})}async created(){try{await this.$store.dispatch("loadMeta"),window.addEventListener("hashchange",this.selectViaHash),await this.selectViaHash()}catch(e){this.$buefy.toast.open({duration:5e3,message:e.toString(),position:"is-bottom",type:"is-danger"})}}async destroyed(){window.removeEventListener("hashchange",this.selectViaHash)}get isLoading(){return this.$store.state.loading}get verseNumber(){return this.$store.state.verseStart===this.$store.state.verseEnd?this.$store.state.verseStart:`${this.$store.state.verseStart}-${this.$store.state.verseEnd}`}print(){this.today=(new Date).toLocaleDateString(),this.$nextTick(()=>window.print())}};R=Object(n["a"])([Object(i["a"])({components:{BibleSelector:f,WriteBook:N}})],R);var M=R,B=M,A=(s("d00b"),Object(u["a"])(B,o,a,!1,null,null,null)),V=A.exports,L=s("9483");Object(L["a"])("/biblewriting/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});s("5b81");var G=s("2f62"),H=s("bc3a"),T=s.n(H),D=s("6591"),F=s.n(D);r["a"].use(G["a"]);const I="https://6lz7n4.deta.dev/https/www.bskorea.or.kr/bible";var W=new G["a"].Store({state:{version:"",book:"",chapter:1,verseStart:1,verseEnd:1,versionMeta:[],cachedBible:[],loading:!1},mutations:{loading(e,t){e.loading=t},loadChapter(e,t){const[s]=e.versionMeta.filter(e=>e.code===t.version).map(e=>e.books).flat().filter(e=>e.code===t.book);if(void 0===s)return;const[r]=e.cachedBible.filter(e=>e.version===t.version&&e.book===t.book&&e.chapter===t.chapter);void 0===r?e.cachedBible.push(t):r.verses=t.verses,e.verseStart>t.verses.length&&(e.verseStart=1),e.verseEnd>t.verses.length&&(e.verseEnd=1)},loadMeta(e,t){e.versionMeta=t,e.version=t[0].code,e.book=t[0].books[0].code,e.chapter=1,e.verseStart=1,e.verseEnd=1},select(e,t){const s={version:e.version,book:e.book,chapter:e.chapter,verseStart:e.verseStart,verseEnd:e.verseEnd,...t};let r=e.versionMeta.find(({code:e})=>e===s.version);if(!r&&(s.version=e.version,r=e.versionMeta.find(({code:t})=>t===e.version),!r))return;let o=r.books.find(({code:e})=>e===s.book);if(!o&&(s.book=e.book,o=r.books.find(({code:t})=>t===e.book),!o))return;(s.chapter<=0||s.chapter>o.chapters)&&(s.chapter=1);const[a]=e.cachedBible.filter(({version:e,book:t,chapter:r})=>e===s.version&&t===s.book&&r===s.chapter).map(({verses:e})=>e.length);(s.verseStart<=0||a&&s.verseStart>a)&&(s.verseStart=1),(s.verseEnd<=0||a&&s.verseEnd>a)&&(s.verseEnd=1),({version:e.version,book:e.book,chapter:e.chapter,verseStart:e.verseStart,verseEnd:e.verseEnd}=s)}},getters:{versions(e){return e.versionMeta.map(e=>({name:e.name,code:e.code}))},versionName(e){const[t]=e.versionMeta.filter(t=>t.code===e.version).map(e=>e.name);return t||""},books(e){return e.versionMeta.filter(t=>t.code===e.version).map(e=>e.books).flat().map(e=>({name:e.name,code:e.code}))},bookName(e){const[t]=e.versionMeta.filter(t=>t.code===e.version).map(e=>e.books).flat().filter(t=>t.code===e.book).map(e=>e.name);return t||""},chapters(e){const[t]=e.versionMeta.filter(t=>t.code===e.version).map(e=>e.books).flat().filter(t=>t.code===e.book).map(e=>e.chapters);return t||0},verses(e){const[t]=e.cachedBible.filter(t=>t.version===e.version&&t.book===e.book&&t.chapter===e.chapter).map(e=>e.verses);return void 0===t?0:t.length},verse(e){const[t]=e.cachedBible.filter(t=>t.version===e.version&&t.book===e.book&&t.chapter===e.chapter).map(e=>e.verses);return void 0===t?"":Object.keys([...Array(e.verseEnd-e.verseStart+1)]).map(t=>parseInt(t)+e.verseStart).map(e=>t[e-1].trim()).join(" ")}},actions:{async loadMeta({commit:e}){e("loading",!0);try{const t=await T.a.get(I+"/korbibReadpage.php"),s=new DOMParser,r=s.parseFromString(t.data,t.headers["content-type"].split(";")[0]),o=Array.from(r.querySelectorAll("select#version option")).map(e=>({name:e.text,code:e.value,books:[]})),a=await T.a.get(I+"/js/bible.list.js"),n=F()(a.data+"; ["+o.map(({code:e})=>`{code: ${JSON.stringify(e)}, books: sz${e}Book}`).join(", ")+"]"),i=e=>{const t=n.find(({code:t})=>t===e);return void 0===t?[]:t.books.map(([e])=>({name:e[0],code:e[1],chapters:parseInt(e[e.length-1])}))};e("loadMeta",o.map(e=>({...e,books:i(e.code)})).filter(e=>e.books.length>0))}finally{e("loading",!1)}},async loadChapter({state:e,commit:t}){t("loading",!0);try{const s=await T.a.get(I+"/korbibReadpage.php",{params:{version:e.version,book:e.book,chap:e.chapter}}),r=new DOMParser,o=r.parseFromString(s.data,s.headers["content-type"].split(";")[0]),a=e=>e.nodeType===Node.TEXT_NODE?(e.textContent||"").replaceAll(/\s+/g," "):"FONT"===e.nodeName?Array.from(e.childNodes).map(e=>a(e)).filter(e=>e).join(""):"",n=Array.from(o.querySelectorAll("div.bible_read span.number")).map(e=>null===e.parentNode?"":Array.from(e.parentNode.childNodes).map(e=>a(e)).filter(e=>e).join(""));t("loadChapter",{version:e.version,book:e.book,chapter:e.chapter,verses:n})}finally{t("loading",!1)}},async select({state:e,getters:t,commit:s,dispatch:r},o){const{verse:a,...n}=o,i=n;a&&(i.verseStart=a,i.verseEnd=a),s("select",i),0===t.verses&&await r("loadChapter");const c=e.verseStart===e.verseEnd?""+e.verseStart:`${e.verseStart}/${e.verseEnd}`,l=e.verseStart===e.verseEnd?""+e.verseStart:`${e.verseStart}-${e.verseEnd}`;history.pushState({},`${t.versionName} ${t.bookName} ${e.chapter}:${l}`,`#${e.version}/${e.book}/${e.chapter}/${c}`)},async selectRange({state:e,getters:t,commit:s,dispatch:r},o){s("select",o),0===t.verses&&await r("loadChapter");const a=e.verseStart===e.verseEnd?""+e.verseStart:`${e.verseStart}/${e.verseEnd}`,n=e.verseStart===e.verseEnd?""+e.verseStart:`${e.verseStart}-${e.verseEnd}`;history.pushState({},`${t.versionName} ${t.bookName} ${e.chapter}:${n}`,`#${e.version}/${e.book}/${e.chapter}/${a}`)}},modules:{}}),q=s("289d");s("5abe");r["a"].use(q["a"]),r["a"].config.productionTip=!1,new r["a"]({store:W,render:e=>e(V)}).$mount("#app")},cf05:function(e,t,s){e.exports=s.p+"img/logo.199b774b.png"},d00b:function(e,t,s){"use strict";s("d647")},d647:function(e,t,s){}});
//# sourceMappingURL=app.098580f9.js.map